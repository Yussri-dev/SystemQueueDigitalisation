@page
@model SystemQueueDigitalisation.Web.Pages.Providers.ProviderLoginModel
@{
    ViewData["Title"] = "Login";
}

<h2>Provider Login</h2>

<form method="post">
    <div class="form-group">
        <label asp-for="LoginRequest.Email" class="form-label"></label>
        <input asp-for="LoginRequest.Email" class="form-control" placeholder="Enter your email" />
        <span asp-validation-for="LoginRequest.Email" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="LoginRequest.Password" class="form-label"></label>
        <input asp-for="LoginRequest.Password" type="password" class="form-control" placeholder="Enter your password" />
        <span asp-validation-for="LoginRequest.Password" class="text-danger"></span>
    </div>
    @* <div class="form-check mb-3">
        <input type="checkbox" asp-for="LoginRequest.RememberMe" class="form-check-input" />
        <label asp-for="LoginRequest.RememberMe" class="form-check-label">Remember me</label>
    </div> *@
    <button type="submit" class="btn btn-primary mt-2" id="loginButton">
        <span id="loginButtonText">Login</span>
        <span id="loadingSpinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
    </button>

    @if (!string.IsNullOrEmpty(Model.Message))
    {
        <div class="alert alert-info mt-3">@Model.Message</div>
    }
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.querySelector('form').addEventListener('submit', function () {
            const button = document.getElementById('loginButton');
            const buttonText = document.getElementById('loginButtonText');
            const spinner = document.getElementById('loadingSpinner');

            buttonText.classList.add('d-none');
            spinner.classList.remove('d-none');
            button.disabled = true;
        });
    </script>
}